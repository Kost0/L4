# optimizedAPI - Number Sorting API Optimization Project

## Описание проекта

REST API сервис для сортировки массива чисел.

**Основной эндпоинт:**
- `POST /sort` - принимает JSON с массивом чисел и возвращает отсортированный массив

**Пример запроса:**
```json
{
  "numbers": [5, 2, 8, 1, 9]
}
```

---

## Анализ производительности (версия 1.0 - неоптимизированная)

### Результаты нагрузочного тестирования (Vegeta)

**Параметры теста:**
- Rate: 50 req/s
- Duration: 30s
- Total requests: 1500

**Метрики:**
| Метрика | Значение |
|---------|----------|
| Success Rate | 100.00% |
| Mean Latency | 1.306 ms |
| 50th Percentile | 836.254 µs |
| 90th Percentile | 2.522 ms |
| 95th Percentile | 2.718 ms |
| 99th Percentile | 3.453 ms |
| Max Latency | 18.932 ms |
| Throughput | 50.03 req/s |

### CPU Профилирование (pprof - 30s)

**Top горячие точки:**

1. **`handler.bubbleSort`** - **45.83% CPU** (0.66s из 1.44s)
    - Основная вычислительная нагрузка
    - Неэффективный алгоритм O(n²)
    - Возможность оптимизации: замена алгоритма

2. **`encoding/json.(*decodeState).value`** - **21.53% CPU** (0.31s)
    - Десериализация JSON запроса
    - Рекурсивный парсинг структур

3. **`encoding/json.(*decodeState).object`** - **21.53% CPU** (0.31s)
    - Парсинг JSON объектов

4. **`encoding/json.(*Decoder).Decode`** - **25.00% CPU** (0.36s)
    - Общие затраты на JSON декодирование

5. **`net/http` инфраструктура** - **92.36% CPU** (1.33s)
    - Обработка HTTP соединений
    - Включает всю цепочку обработки запроса

**Ключевые наблюдения:**
- Bubble Sort - явное узкое место (46% CPU)
- JSON десериализация занимает ~25% CPU

### Benchmark результаты

```
BenchmarkSort-8   	  925282	      1418 ns/op
```
---

## Оптимизация

**Опираясь на результаты анализа, ключевой проблемой является неэффективный алгоритм сортировки. Для начала заменим его.**